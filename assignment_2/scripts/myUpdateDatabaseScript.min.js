function updateDatabaseFromBBCFeed(e){$.ajax({type:"GET",url:"php/rss_bbc_feed.php",data:{feedName:e},dataType:"xml",cache:!1,success:updateDatabase,error:function(e,t,a){console.log(e.status),console.log(a)}})}function saveToDatabase(e,t){$.ajax({type:"POST",url:"php/db/insert.php",data:{title:e.find("title").text().split("'").join("\\'"),imgSrc:e.find("thumbnail").attr("url").split("'").join("\\'"),desc:e.find("description").text().split("'").join("\\'"),link:e.find("link").text().split("'").join("\\'"),pubDate:getFormatedDateString(e.find("pubDate").text()).split("'").join("\\'"),chan:t},error:function(e,t,a){console.log(e.status),console.log(a)}})}function getFormatedDateString(e){var e=e.split(" ");return e[1]+"-"+(new Date(Date.parse(e[2]+" 1, 2000")).getMonth()+1)+"-"+e[3]+" "+e[4]}function updateDatabase(e){for(var t=$(e).find("channel").eq(0).find("title").eq(0).text(),a=0;a<$(e).find("item").length;a++)saveToDatabase($(e).find("item").eq(a),t)}setInterval(function(){updateDatabaseFromBBCFeed(""),updateDatabaseFromBBCFeed("entertainment_and_arts/"),updateDatabaseFromBBCFeed("politics/"),updateDatabaseFromBBCFeed("science_and_environment/"),updateDatabaseFromBBCFeed("technology/"),updateDatabaseFromBBCFeed("world/")},3e4);